# А что если?..

> Быть или не быть...
> Звучит как алгоритм!
> – аллюзия на Шекспира.

## Управление потоком выполнения

Пока что мы писали крайне простые программы, где всё было линейно. И это
прекрасно, но ценность таких программ часто низка. Поэтому в рамках
данного занятия рассмотрим следующие темы:

- Управляющие конструкции
- Циклы

## Управляющие конструкции

В Си выражение типа `a = 1;` – оператор, а точка с запятой – обязательная
завершающая часть оператора. Фигурные скобки – группировка операторов в блоки,
синтаксически эквивалентные одному оператору. Мы уже выдели это на предыдущей
лекции – при объявлении функции `main`.

### Оператор if-else

Оператор if-else определяет процесс принятия альтернативных решений.

```C
if (выражение)
  оператор1
else
  оператор2
```

Ветка else необязательна. В случае, если выражение истинно, то выполнится
`оператор1`, иначе – `оператор2`. После чего продолжится выполнение программы
после блока `if`.

Например,

```C
#include <stdio.h>

int main(void) {
    int a;
    int b;
    scanf("%d %d", &a, &b);  // Кладём в a и b два числа со стандартного ввода.

    if (b == 0) {
        return 1;
    }
    else {
        printf("%d\n", a / b);
    }

    return 0;
}
```

**Истина** – всего лишь ненулевое значение. 0 = ложь (ну и NULL, но об этом
позже).

Более сложный и плохой вариант:

```C
// ещё и вариант определения переменных (плохой)
float a = 1, b = 2;
if (a)
    if (b / a < 1)
        return a;
else
    return 0;
return b;
```

– довольно вычурный вариант вернуть максимум, либо `0` в случае, если `a == 0`.
К тому же неверный – найдите ошибку.

Более корректный вариант:

```C
float a = 1;
float b = 2;

if (a) {
    if (b / a < 1) {
      return a;
    }
}
else {
    return 0;
}

return b;
```

– фигурные скобки явно указывают, что к чему (`else` применяется к ближайшему
`if`) – используйте их!

### else-if

```C
if (выражение1)
  оператор1
else if (выражение2)
  оператор2
else
  оператор3
```

– эта конструкция – объединение нескольких операторов `if-else`.
Один из способов задать более 2-х вариантов развития событий (аналог `elif` из `python`).

### Оператор switch

Аналог оператора if-else на много альтернативных вариантов выполнения.
Однако, так как используются не любые выражения, а только константы,
сильно оптимизирован.

```C
switch (выражение) {
case константа1:
  операторы1
case константа2:
  операторы2
default:
  операторы3
}
```

Идём сверху вниз и проверяем на соответствие константе. В случае соответствия,
выполняются операторы (не оператор, а операторы!). Чтобы остановить проверку
(а она продолжится далее), вызываем `break` – он прерывает поток выполнения
циклов или оператора `switch`, возвращаясь на уровень выше.

Если никто так нас и не остановил, а варианты закончились – переходим к
"ветке" `default`.

Пример кода для получения текста "комментарий/комментариев" в зависимости от их
числа:

```C
#include <stdio.h>

int main (void) {
  unsigned a = 1;
  char *text;  // Указатель на символы - поймём позднее

  switch (a % 10) {
  case 1:
    text = "комментарий";
    break;
  case 2:
  case 3:
  case 4:
    text = "комментария";
    break;
  case 5: case 6: case 7: case 8: case 9: case 0:
    text = "комментариев";
  default:
    return 1;
  }

  puts(text);

  return 0;
}
```

Пока смотрим только на оператор switch. Всё остальное – чтобы заработал пример,
а сам пример не был бы совсем выдуманным.
